import random
import requests
import schedule
import time
from flask import Flask

# –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏ Chat ID –¥–µ–≤—É—à–∫–∏
BOT_TOKEN = "7664740886:AAE2urRo9clBge4ipEnM-4CehHFz4AZi3ec"  # –¢–æ–∫–µ–Ω, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç BotFather
CHAT_ID = "258005348"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ Chat ID –≤–∞—à–µ–π –¥–µ–≤—É—à–∫–∏

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
love_messages = [
    "–ü—Ä–∏–≤–µ—Ç, –ª–∞–ø—É–ª—è! ‚òÄÔ∏è –ü—Ä–æ—Å—Ç–æ —Ö–æ—á—É —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç—ã –æ—Å–æ–±–µ–Ω–Ω–∞—è! üíñ.",
    "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å —Ç–æ–±–æ–π ‚Äî –∫–∞–∫ –º–∞–ª–µ–Ω—å–∫–∏–π –ø—Ä–∞–∑–¥–Ω–∏–∫ üéâ. –õ—é–±–ª—é —Ç–µ–±—è!",
    "–¢—ã –º–æ—è —Ä–∞–¥–æ—Å—Ç—å ‚ù§Ô∏è. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å!",
    "–ó–Ω–∞–µ—à—å, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –º–µ–Ω—è —Å—á–∞—Å—Ç–ª–∏–≤—ã–º? –¢–≤–æ—è —É–ª—ã–±–∫–∞ üòä.",
    "–°–∫—É—á–∞—é –ø–æ —Ç–µ–±–µ –ö–∞—Ç–µ–Ω—å–∫–∞!",
    "–°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å, —á—Ç–æ–±—ã –Ω–∞–ø–æ–º–Ω–∏—Ç—å: —Ç—ã —Å–∞–º–∞—è –ª—É—á—à–∞—è üåü!",
    "–ù–∞–¥–µ—é—Å—å, –ê–ª—å–±–µ—Ä—Ç–æ–≤–Ω–∞ –ø–æ–º–Ω–∏—Ç, –∫–∞–∫–∞—è —Ç—ã –∫—Ä—É—Ç–∞—è! üòç.",
    "–¢—ã –º–æ—ë —Å—á–∞—Å—Ç—å–µ, –∏ —è –Ω–µ —É—Å—Ç–∞—é —ç—Ç–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å üíï.",
    "–õ—é–±–ª—é —Ç–µ–±—è, –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞, –∫—Ä–æ–≤—å –º–æ–µ–π –∫—Ä–æ–≤–∏!",
    "–¢—ã - –ª—É–Ω–∞ –º–æ–µ–π –∂–∏–∑–Ω–∏, –ö–∞—Ç—å–µ–Ω—å–∫–∞! üåï‚ù§Ô∏è",
    "–¢—ã –ø—Ä–æ—Å—Ç—Ä–æ –ø—Ä–µ–ª–µ—Å—Ç—å, –ö–∞—Ç–µ–Ω—å–∫–∞. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å üíñ."
]


# Flask-—Å–µ—Ä–≤–µ—Ä
app = Flask(__name__)

@app.route("/")
def home():
    return "–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è ‚ù§Ô∏è"

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
def send_love_message():
    message = random.choice(love_messages)
    url = f"https://api.telegram.org/bot{BOT_TOKEN}/sendMessage"
    payload = {"chat_id": CHAT_ID, "text": message}

    response = requests.post(url, data=payload)
    if response.status_code == 200:
        print(f"–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: {message}")
    else:
        print("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:", response.text)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
schedule.every(4).hours.do(send_love_message)

# –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
def run_scheduler():
    while True:
        schedule.run_pending()
        time.sleep(1)

# –ó–∞–ø—É—Å–∫ Flask –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
if __name__ == "__main__":
    from threading import Thread
    # –ü–æ—Ç–æ–∫ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
    scheduler_thread = Thread(target=run_scheduler)
    scheduler_thread.start()

    # –ó–∞–ø—É—Å–∫ Flask-—Å–µ—Ä–≤–µ—Ä–∞
    app.run(host="0.0.0.0", port=8080)